<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Text Similarity Checker</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
      max-width: 1000px;
      margin: auto;
    }
    .container {
      display: flex;
      gap: 20px;
    }
    textarea {
      width: 100%;
      height: 200px;
    }
    canvas {
      margin-top: 30px;
    }
  </style>
</head>
<body>
  <h1>Text Similarity Checker</h1>

  <div class="container">
    <div>
      <h3>Text 1</h3>
      <textarea id="text1" placeholder="Paste first text here..."></textarea>
    </div>
    <div>
      <h3>Text 2</h3>
      <textarea id="text2" placeholder="Paste second text here..."></textarea>
    </div>
  </div>

  <br>
  <button onclick="compareTexts()">Confirm</button>
  <canvas id="similarityChart"></canvas>

  <script>
    const stopwords = new Set([
      "a", "an", "and", "are", "as", "at", "be", "but", "by", "for", "if", "in",
      "into", "is", "it", "no", "not", "of", "on", "or", "such", "that", "the",
      "their", "then", "there", "these", "they", "this", "to", "was", "will", "with",
      "you", "your", "i", "he", "she", "we", "me", "my", "our", "his", "her", "him", "them", "from"
    ]);

    function cleanAndTokenize(text) {
      const words = text.toLowerCase().match(/\b\w+\b/g) || [];
      return new Set(words.filter(word => !stopwords.has(word)));
    }

    function jaccardSimilarity(set1, set2) {
      const intersection = new Set([...set1].filter(word => set2.has(word)));
      const union = new Set([...set1, ...set2]);
      return intersection.size / union.size;
    }

    function compareTexts() {
      const text1 = document.getElementById("text1").value;
      const text2 = document.getElementById("text2").value;

      const set1 = cleanAndTokenize(text1);
      const set2 = cleanAndTokenize(text2);

      const similarity = jaccardSimilarity(set1, set2);
      const percentage = Math.round(similarity * 100);

      renderPieChart(percentage);
    }

    let chart;
    function renderPieChart(similarityPercent) {
      const ctx = document.getElementById('similarityChart').getContext('2d');
      if (chart) chart.destroy();

      chart = new Chart(ctx, {
        type: 'pie',
        data: {
          labels: ['Similar Words', 'Different Words'],
          datasets: [{
            data: [similarityPercent, 100 - similarityPercent],
            backgroundColor: ['#4caf50', '#f44336'],
          }]
        },
        options: {
          plugins: {
            title: {
              display: true,
              text: `Similarity: ${similarityPercent}%`,
              font: { size: 20 }
            }
          }
        }
      });
    }
  </script>
</body>
</html>
